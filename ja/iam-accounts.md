# IAMアカウントとガバナンス設定
**Quickstarts > 3.IAMアカウントとガバナンス設定**

今回の学習モジュールでは、ガバナンス設定とIAM(Identity and Access Management)アカウント管理方法について説明します。これにより、組織内のリソースを効率的に管理し、権限ベースのアクセス制御を設定し、セキュリティと生産性を最大化することができます。

![mod_info](https://kr1-api-object-storage.nhncloudservice.com/v1/AUTH_2acdfabf4efe4efc8a04c00b348110c9/cdn_origin/prod_cloud_quickstarts/module_info/IAM%20%EA%B3%84%EC%A0%95%EA%B3%BC%20%EA%B1%B0%EB%B2%84%EB%84%8C%EC%8A%A4%20%EC%84%A4%EC%A0%95.png)
## 学習目標

今回の学習モジュールで学ぶ内容は以下の通りです。 

* **IAMコンソールのドメイン設定**
    * IAMアカウントでNHN Cloudコンソールを使用するためのドメインアドレス設定
* **IAMアカウントの作成と役割付与**
    * IAMアカウント作成
    * アカウントごとの役割付与と権限設定
* **IAMガバナンス設定**
    * セキュリティ強化のためのログインセキュリティ設定
* **IAMアカウントアクセス**
    * IAMコンソールドメインでIAMアカウントにアクセス
<br></br>

## 始める前に

今回の学習モジュールを始める前に必要なものは以下の通りです。

* **標準のインターネットブラウザ**
    * Google Chrome、Microsoft Edge、Firefox、Safariなどの最新バージョンのブラウザがインストールされている必要があります。
    * ブラウザの設定でJavaScriptとCookieが有効になっている必要があります。
* **インターネット接続環境**
    * 安定したインターネット接続が必要で、推奨帯域幅は最低5Mbps以上です。
    * HTTPSによる安全な通信が可能であること。
* **会員アカウント**
    * 決済手段を登録したNHN Cloudアカウントが必要です。
    * NHN Cloudのホームページにログインする必要があります。

    **本ガイドは、[2.組織とプロジェクトの作成](https://docs.nhncloud.com/ja/quickstarts/ja/create-organization/)以降の段階から始めます。**

## IAMアカウントにアクセスするための準備

### ステップ1.IAMコンソールのドメインアドレスを設定します。

1. NHN Cloudコンソールに接続した後、上部メニューから`MyORG`組織をクリックします。
2. 組織ダッシュボード画面で**組織管理**タブをクリックします。
3. **組織管理**]タブのサブメニューである[**組織基本設定]で** **ドメイン設定**項目を確認します。
4. **ドメイン設定**項目を以下のように入力し、**ドメイン設定を**クリックします。
    * ドメイン名:`ユーザーが希望するドメイン名`
    > [注意]
    >
    > * ドメイン名はアルファベット、数字、ハイフンのみ使用可能で、3から40文字の間で入力可能です。最初の文字は英字と数字のみ入力可能です。
    > * 他の人が使用しているドメイン名を使用することはできません。 重複したドメイン名を入力すると、\*\*重複したドメインが存在します**と出力され、入力できません。    
5. **通知**ウィンドウで[**OK**]をクリックします。
6. **ドメイン設定**項目の下にある**IAMコンソール**項目でドメイン名のURLを確認し、右側の**コピーを**クリックしてドメインアドレスをコピーします。

!!! tip "知っておくべきこと"
\* IAM コンソールのドメイン名
\* ドメイン名は、IAMアカウントを利用するユーザー専用のアクセスアドレスです。次の操作でアクセス方法を確認することができます。
\* ドメイン名ガイド
\* ドメイン名を設定する際、以下の前提条件を遵守し、明確で直感的な名前を使用することをお勧めします。
\***組織の識別情報を含む**
\* 組織名には、会社名、部署名、グループ名など、明確に組織を識別できる情報を含める。
\* 例: company-name, team-alpha：`company-name`,`team-alpha`
\***管理体系を反映**
\* 大規模な組織の場合、地域、業務タイプ、部署などを接尾辞として追加する。
\* 例：example:`company-kr`,`org-dev`,`team-global`
\***ガバナンスとの連携を考慮**
\* IAM ポリシーや権限管理を考慮し、命名体系の整合性を維持
\* 例：enterprise-core、partner-project`enterprise-core`,`partner-project`
\***将来の拡張性を考慮**
\* 長期的に拡張可能な構造で作成し、追加プロジェクトがあっても明確に区別できる。
\* 例：`parent-org`
\* ドメイン名は設定後も変更可能です。

### ステップ2.IAM2次認証ログインのセキュリティを設定します。

1. **組織管理**]タブのサブタブメニューの[**ガバナンス設定**]タブをクリックします。
2. **IAMガバナンス設定 > ログインセキュリティ設定**項目の**設定変更を**クリックします。
3. 下記のように設定後、**保存を**クリックします。
    * ログインのセキュリティ設定：`2次認証`
    * サービス：`共通設定`
    * 2次認証:`電子メールまたは携帯電話`
4. **通知**ウィンドウで[**OK**]をクリックします。
5. **設定保存の通知**ウィンドウで[**OK**]をクリックします。

### ステップ3.IAMアカウントの作成

1. コンソールウィンドウ上部のメニューから`MyORG`組織をクリックします。
2. 組織ダッシュボード画面で**メンバー管理**タブをクリックします。
3. **メンバー管理**タブのサブメニューである**IAMアカウントを**クリックします。
4. **+ IAMアカウントの追加を**クリックします。
5. **IAMアカウントの追加**ウィンドウで以下の情報を設定し、[**登録]を**クリックします。
    * ID: `myproject-admin`
    * 名前:`myproject管理者`
    * メール:`ユーザーのメールアドレス`
    > [注意]
    >
    > * ユーザーのメールアドレス
    >     * IAMアカウントを使用するためにはIAMパスワードの設定が必要で、設定されたパスワードは入力したメールアドレスに送信される場合がありますので、必ず受信可能なメールアドレスを入力してください。
    > * ID値設定
    >     * IDは一意でなければなりません。他の人が使用しているドメイン名を使用することはできません。 重複したドメイン名を入力すると、**同じIDを持つメンバーが既に存在しますと**出力され、入力されません。
    >     * IDは設定後も変更可能です。
6. **+ IAMアカウントの追加を**クリックします。
7. **IAMアカウントの追加**ウィンドウで以下の情報を設定し、[**登録]を**クリックします。
    * ID: `myproject-budget`
    * 名前:`myproject予算担当者`
    * メール:`ユーザーのメールアドレス`
8. IAMアカウントリストで作成した2つのIDを確認します。

### ステップ4.IAMアカウントの役割付与

1. IAMメンバーリストで、名前が`myproject管理者である` `myproject-admin`IDをクリックして選択します。
2. 下部の分割画面で、[**役割の変更]を**クリックします。
3. **役割の変更**画面で、以下の情報を設定後、[**変更]を**クリックします。
    * 項目選択：`OrgRoleを`クリックした後、詳細役割で`MEMBER`チェックボックスを選択します。 (役割`NONEは`選択されたチェックボックスをそのまま維持します)。
4. **通知**ウィンドウで[**OK**]をクリックします。
5. IAMアカウントのリストで名前が`myproject管理者である` `myproject-admin`IDをクリックして選択した後、下部の分割画面で修正した役割を確認します。
6. IAMアカウントリストから、名前が`myproject予算担当者である` `myproject-budget`IDをクリックして選択します。
7. 下部の分割画面で、[**役割の変更]を**クリックします。
8. **役割の変更**画面で、以下の情報を設定後、[**変更]を**クリックします。
    * 項目選択：`OrgRole`クリック後、詳細役割で`BILLING_VIEWER、BUDGET_ADMIN`チェックボックスを選択、`NONE`チェックボックスを選択解除します。
9. **通知**ウィンドウで[**OK**]をクリックします。

!!! tip "知っておきたいこと"
\* IAMの基本役割
\* IAM作成時、基本ロールはNONE(Default Role)に設定されています。この役割は、組織ダッシュボードの読み取り、組織基本設定の読み取りが可能です。

### ステップ5.IAMアカウントのパスワードを設定する

1. NHN Cloudコンソールに接続した後、上部メニューから`MyORG`組織をクリックします。
2. コンソールウィンドウ上部のメニューから`MyORG`組織をクリックします。
3. 組織ダッシュボード画面で**メンバー管理**タブをクリックします。
4. **メンバー管理**タブのサブメニューである**IAMアカウントを**クリックします。
5. IAMメンバーリストで名前が`myproject管理者である` `myproject-adminの`右側の管理領域で**パスワード設定メールを**クリックします。
6. 通知ウィンドウで[**OK**]をクリックします。
7. パスワード設定メールアドレスの送信通知ウィンドウで「**OK」を**クリックします。
8. ウェブブラウザの新しいウィンドウまたはメール確認ツールなどを利用して、`myproject-adminに`登録したメールを確認します。メールタイトルは <span style="color:rgb(34, 34, 34);"><strong>[NHN Cloud IAM] です。</strong></span>MyORG<span style="color:rgb(34, 34, 34);"><strong>のサービスを利用するためのパスワードを設定してください]</strong>です。</span>
    > [注意】 パスワード設定メールが届かない場合
    > * **パスワード設定メール送信**後にメールが未受信の場合、使用しているメールサービスのスパムボックスやブロック設定、メール容量などを確認してください。現象が継続的に発生する場合は、IAMメンバーリストの右側の管理領域で**情報**修正をクリックした後、他のメールアドレスに変更してご利用ください。
9. メール本文に**変更するを**クリックします。
10. パスワード変更ページが出力されたら、"新しいパスワードの入力"と"パスワードの再入力"に変更するパスワードを同じように入力し、**"パスワードの保存"を**クリックします。
    > [注意】パスワード作成ルール
    > * 英語、数字、特殊文字を組み合わせて8～15文字で入力する必要があります。
11. **新しいパスワードが保存されました。**通知ウィンドウが表示されたら、[**OK**]をクリックします。
12. 上記の作業手順と同じように、IAMメンバーリストで名前が <span style="color:rgb(34, 34, 34);">`myproject 予算担当者` </span>である`myproject-billingの`パスワードをリセットします。

### ステップ6.myproject-adminのIAMアカウントにアクセスします。

1. ウェブブラウザで新しいウィンドウを開き、`https://MyORG IAMコンソールドメインのアドレスを`入力してIAMコンソールドメインにアクセスします。
    * IAMコンソールドメインアドレス
        * [3.IAMアカウントとガバナンス設定](https://docs.nhncloud.com/ja/quickstarts/ja/iam-accounts/)作業1でコピーした**IAMコンソールドメイン名のURLを**IAMアカウントユーザーに共有して使用することができます。
2. `MyORGの`ログイン画面で以下の情報を入力し、**ログインを**クリックします。
    * ID:`myproject-admin`
    * パスワード：`タスク 4 で設定した myproject-admin のパスワード。`
3. **2次メール認証ページが**表示されたら、ウェブブラウザの新しいウィンドウまたはメール確認ツールなどを利用して、`myproject-admin`IAMアカウントに登録したメールを確認します。メールタイトルは\*\*[NHN Cloud IAM]2次メール認証が要求されました\*\*です。
4. メール本文の**認証を**クリックします。
5. **2次メール認証ページに****戻り**、[OK]をクリックします。
6. IAMアカウントのコンソールページを確認します。
7. 組織ダッシュボード画面で**組織管理**タブをクリックします。
8. **組織管理の**サブメニューである**組織基本設定で、**組織の基本設定内容を確認します。
9. 右上の`myprojectマネージャに`マウスオーバーした後、表示されるメニューから**ログアウトを**クリックします。

!!! tip "知っておきたいこと"
\*`myproject-admin`Role
\* このアカウントは、プロジェクトのCreate(作成), 組織ダッシュボードのRead(読み取り), プロジェクトのRead(読み取り), 組織ダッシュボードのRead(読み取り), 組織の基本設定のRead(読み取り)しかできない権限です。組織のメンバー管理、通知受信グループ管理、通知管理などのタブをクリックすると、**サービス利用権限のない**画面が表示されます。
\* ユーザーの役割に合わせて適切な権限を付与します。詳細はガイドをご参照ください。


> 上記の作業手順と同じように`myproject-billing`IAMアカウントにアクセスすることができます。

## 参考サイト

* [コンソール使用ガイド](https://docs.nhncloud.com/ja/nhncloud/ja/console-user-guide/)
* [セキュリティポリシー](https://docs.nhncloud.com/ja/nhncloud/ja/security-policy/)
* [IAM](https://en.wikipedia.org/wiki/Identity_and_access_management)

## 前の段階

* [2.組織とプロジェクトの作成](https://docs.nhncloud.com/ja/quickstarts/ja/create-organization/)
<br>

## 次のステップ

* [4.ネットワーク設定とインスタンス作成](https://docs.nhncloud.com/ja/quickstarts/ja/network-setup/)
